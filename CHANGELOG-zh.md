# `Nongli` 更新日志

[![zh](https://img.shields.io/badge/lang-zh-red.svg)](CHANGELOG-zh.md)
[![en](https://img.shields.io/badge/lang-en-blue.svg)](CHANGELOG-en.md)


## [待发布]

### 修改

* `hanzi.py` 解析无效名称时抛出异常。
* 多项式拟合改为依赖 `numpy.polynomial.polynomial.polyfit`。


## [1.1.2] - 2025-06-27 六月初三

### 新增

* 检查公历日期、公历时间、农历日期是否有效的函数。
* 计算给定年月的晦日（本月最后一天）的函数 `riqi_to_hui`。
* 测试套件允许自定义判断相等（通过测试）函数的方法。
* 数学模块的单元测试。

### 修改

* 导出 CSV 数据文件的换行符改为 CRLF。
* 修复 `make_fix64` 函数四舍五入的错误。
* 修复 `safe_mul` 函数符号处理的问题。

### 移除

* 测试套件类 `test_suite` 默认的复制构造函数。


## [1.1.1] - 2025-05-31 五月初五

### 新增

* 文档附录和词汇表。
* 关于人工智能生成文档及相关网站的免责声明。
* C++17 不支持但对优化有帮助的新特性。
* 计算农历月所含天数的函数 `days_in_cyue`。
* 公历、阴历、阳历、干支 4 个模块的单元测试。

### 修改

* 更正测试套件输出信息中的序数词尾和名词复数。
* 修复农历月日转换时可能出现的数组越界问题。
* 重构 `coefs.py`，使其支持自定义时间范围。
* 将 Miniconda 环境更换为可以免费商用的 venv。


## [1.0.1] - 2025-05-04 四月初七

### 新增

* 由农历年月和干支日计算日期的函数 `ganzhi_to_riqi`。
* 两个整数相除得到 64 位定点数。
* C++ 用户自定义字面值 `_i64`、`_u64` 等。
* 残差数组每一页的大小 `YD_PAGE` 和 `JS_PAGE`。
* GitHub Actions 持续集成（CI）测试。
* 用于本仓库代码的测试套件。

### 修改

* 将笔记本文件 `coefs.ipynb` 导出为 Python 脚本。
* 将 `fix64_t` 重命名为 `fix64`。
* 更正 `coefs.py` 中导出字节数的计算。

### 移除

* 访问残差数组前检查下标范围。
* 依赖项 `ipykernel`。
* 输入 64 位定点数经度计算时差和八字的接口。
* 截断到某个范围的函数 `math::clip`。


## [1.0.0-beta] - 2025-04-14 三月十七

首个预发布版本。
